{{ 'option_selection.js' | shopify_asset_url | script_tag }}
<script type="text/javascript">

    var selectCallback = function(variant, selector) {

        var addToCart = $('#addToCart'),
        productPrice = $('#productPrice'),
        comparePrice = $('#comparePrice');

        if (variant) {
            if (variant.available) {
                // We have a valid product variant, so enable the submit button
                addToCart.removeClass('disabled').prop('disabled', false).val('Add to Cart');

            } else {
                // Variant is sold out, disable the submit button
                addToCart.val('Sold Out').addClass('disabled').prop('disabled', true);
            }

            // Regardless of stock, update the product price
            productPrice.html(Shopify.formatMoney(variant.price, "{{ shop.money_format }}"));

            // Also update and show the product's compare price if necessary
            if ( variant.compare_at_price > variant.price ) {
                comparePrice.html(
                    'Compare at: ' + Shopify.formatMoney(variant.compare_at_price, "{{ shop.money_format }}")
                ).show();
            } else {
                comparePrice.hide();
            }

        } else {
            // The variant doesn't exist, disable submit button.
            // This may be an error or notice that a specific variant is not available.
            // To only show available variants, implement linked product options:
            //   - http://docs.shopify.com/manual/configuration/store-customization/advanced-navigation/linked-product-options
            addToCart.val('Unavailable').addClass('disabled').prop('disabled', true);
        }
    };

    jQuery(function($) {

        // merge this js code into the wishlist.js file after the wishlist html is rendered.
        
        /* // Add label if only one product option and it isn't 'Title'. Could be 'Size'.
           {% if product.options.size == 1 and product.options.first != 'Title' %}
           $('.selector-wrapper:eq(0)').prepend('<label>{{ product.options.first | escape }}</label>');
           {% endif %}

           // Hide selectors if we only have 1 variant and its title contains 'Default'.
           {% if product.variants.size == 1 and product.variants.first.title contains 'Default' %}
           $('.selector-wrapper').hide();
           {% endif %}

           // Auto-select first available variant on page load. Otherwise the product looks sold out.
           {% assign found_one_in_stock = false %}
           {% for variant in product.variants %}
           {% if variant.available and found_one_in_stock == false %}
           {% assign found_one_in_stock = true %}
           {% for option in product.options %}
           $('.single-option-selector:eq({{ forloop.index0 }})').val({{ variant.options[forloop.index0] | json }}).trigger('change');
           {% endfor %}
           {% endif %}
           {% endfor %} */

    });
</script>

<p id="add-to-cart-msg-wishlist"></p>

<div class="wishlist-block">
  <div class="spinner-wrapper"></div>
  <div id="wishlist-viewed-products"></div>
</div>

<script id="wishlist-viewed-product-template"  type="text/template">
  {% raw %}
  <div id="product-{{handle}}" class="wishlist-item">
    <div class="image-column">
      <div class="wishlist-item-image">
        <a href="{{url}}">
          <img src="{{imageSrc}}" />
        </a>
      </div>
    </div>
    <div class="info-options-column">
      <div class="header-row">
        <h4>
          <a href="{{url}}">
            {{title}} &ndash; {{currency}}
          </a>
        </h4>
      </div>

      <div class="options-row">
        <div class="info-column">

          {{#if hasStyleNumber}}
          <div class="style-number">
            <span class="icon"></span>
            <span class="label">Style #: {{styleNumber}}</span>
          </div>
          {{/if}}

          <a class="remove-item-link" data-product-id="{{id}}" title="Delete item" href="#">
            <span class="icon"></span>
            <span class="label">Remove from my favorites</span>
          </a>

        </div>

        <form method="post" action="/cart/add">
          <input type="hidden" name="quantity" value="1" />

          <div class="option-column">

            <select name="id" id="productSelect-{{id}}" class="product-variants">
              {{#each variants}}
              <option value="{{this.id}}">
                {{this.title}} - {{this.currency}}
              </option>
              {{/each}}
            </select>

          </div>
          <div class="button-column">
            
            <div class="button-label-row">
              <div class="button-label">

              </div>
            </div>

            <button name="add" class="add-to-cart-button">
              <span class="label">Add to cart</span>
              <span class="icon"></span>
            </button>

          </div>

        </form>

      </div>
    </div>
  </div>
  {% endraw %}
</script>

