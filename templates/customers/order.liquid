{% layout 'customer-account' %}

{% comment %}

This template will be automatically generated for you if the file doesn't exist,
but where's the fun in having no control? Define your layout below.

The 'layout settings.customer_layout' line is inserted at the top of every customer account template.
Your theme's settings determine to use the 'default' or 'theme' customer templates.
More info:
- http://www.tetchi.ca/shopify-theme-from-scratch-part-11/

Template note:
- All IDs on this template are required to make the form(s) submit properly

{% endcomment %}

<header>
  <h2>Order {{ order.name }}, {{ order.created_at | date: "%b %d" }}, &lsquo;{{ order.created_at | date: "%y" }}</h2>

  <hr class="hr-4-col" />

  <p>
    <a href="/account" class="back-link">Back to Account Overview</a>
  </p>
</header>

<div class="billing-info-block">

  <h5>Billing Status</h5>

  <p><strong>Payment Status:</strong> {{ order.financial_status }}</p>

  <h5>Billing Address</h5>

  <p>
    {{ order.billing_address.name }}
    <br />
    {% if order.billing_address.company != '' %}
      {{ order.billing_address.company }}
      <br />
    {% endif %}
    {{ order.billing_address.street }},
    {{ order.billing_address.city }},
    {% if order.billing_address.province != '' %}
      {{ order.billing_address.province }},
    {% endif %}
    {{ order.billing_address.country }},
    {{ order.billing_address.zip | upcase }}
    <br />
    Phone: {{ order.billing_address.phone }}, Email: {{ customer.email }}
  </p>
  
</div>

<div class="shipping-info-block">
  
  <h5>Shipping Status</h5>

  <p>
    <strong>Fulfillment Status:</strong> {{ order.fulfillment_status }}
  </p>

  <h5>Shipping Address</h5>

  <p>
    {{ order.shipping_address.name }}
    <br />
    {% if order.shipping_address.company != '' %}
      {{ order.shipping_address.company }}
      <br />
    {% endif %}
    {{ order.shipping_address.street }},
    {{ order.shipping_address.city }}
    {% if order.shipping_address.province != '' %}
      , {{ order.shipping_address.province }},
    {% endif %}
    {{ order.shipping_address.country }},
    {{ order.shipping_address.zip | upcase }}
    <br>
    Phone: {{ order.shipping_address.phone }},
    Email: {{ customer.email }}
  </p>

</div>

{% if order.cancelled %}
  <div class="errors">
    <h6>Order Cancelled on {{ order.cancelled_at | date: "%B %d, %Y %I:%M%p" }}</h6>
    <p>Reason: {{ order.cancel_reason }}</p>
  </div>
{% endif %}

<div class="order-items-block">
  <h5>Items</h5>

  <div class="order-table-block">
    <table>
      <tbody>
        {% for line_item in order.line_items %}
          <tr>
            <td>

              {% include 'order-line-item' %}

            </td>
            <td>{{ line_item.quantity | times: line_item.price | money }}</td>
          </tr>
        {% endfor %}
        
      </tbody>
      <tfoot>
        <tr>
          <td>Subtotal:</td>
          <td class="text-right">{{ order.subtotal_price | money }}</td>
        </tr>

        {% for discount in order.discounts %}
          <tr class="order_summary discount">
            <td>{{ discount.code }} Discount:</td>
            <td class="text-right">{{ discount.savings | money }}</td>
          </tr>
        {% endfor %}

        {% for shipping_method in order.shipping_methods %}
          <tr>
            <td>Shipping ({{ shipping_method.title }}):</td>
            <td class="text-right">{{ shipping_method.price | money }}</td>
          </tr>
        {% endfor %}

        {% for tax_line in order.tax_lines %}
          <tr>
            <td>Tax ({{ tax_line.title }} {{ tax_line.rate | times: 100 }}%):</td>
            <td class="text-right">{{ tax_line.price | money }}</td>
          </tr>
        {% endfor %}

        <tr>
          <td><strong>Total:</strong></td>
          <td class="text-right"><strong>{{ order.total_price | money }} {{ order.currency }}</strong></td>
        </tr>
      </tfoot>

    </table>
    
  </div>
</div>



